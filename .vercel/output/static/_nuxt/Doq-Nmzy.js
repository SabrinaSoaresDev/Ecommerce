import{_ as T}from"./kStq10vT.js";import{_ as N,c as d,o as u,a as o,i as s,v,g as C,m as S,F as x,t as r,z as B,u as D,k as E,A as j,e as U,b,w as M,d as O,h as P,r as L}from"./Cnq9NFPr.js";import{u as Y}from"./WEZ96hH_.js";import{r as H}from"./AhQuR5BC.js";const Q={class:"form-section"},X={__name:"EnderecoForm",props:["modelValue"],setup(e){return(f,a)=>(u(),d("div",Q,[a[7]||(a[7]=o("h2",null,"Endereço de Entrega",-1)),s(o("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>e.modelValue.nome=l),placeholder:"Nome completo"},null,512),[[v,e.modelValue.nome]]),s(o("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>e.modelValue.rua=l),placeholder:"Rua"},null,512),[[v,e.modelValue.rua]]),s(o("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>e.modelValue.bairro=l),placeholder:"bairro"},null,512),[[v,e.modelValue.bairro]]),s(o("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>e.modelValue.complemento=l),placeholder:"complemento"},null,512),[[v,e.modelValue.complemento]]),s(o("input",{"onUpdate:modelValue":a[4]||(a[4]=l=>e.modelValue.cidade=l),placeholder:"Cidade"},null,512),[[v,e.modelValue.cidade]]),s(o("input",{"onUpdate:modelValue":a[5]||(a[5]=l=>e.modelValue.estado=l),placeholder:"Estado"},null,512),[[v,e.modelValue.estado]]),s(o("input",{"onUpdate:modelValue":a[6]||(a[6]=l=>e.modelValue.cep=l),placeholder:"CEP"},null,512),[[v,e.modelValue.cep]])]))}},G=N(X,[["__scopeId","data-v-9312cb43"]]),J={class:"form-section"},K={__name:"PagamentoForm",props:["modelValue"],setup(e){return(f,a)=>(u(),d("div",J,[a[6]||(a[6]=o("h2",null,"Pagamento",-1)),s(o("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>e.modelValue.metodo=l)},a[5]||(a[5]=[o("option",{value:""},"Escolha uma forma de pagamento",-1),o("option",{value:"credito"},"Cartão de Crédito",-1),o("option",{value:"debito"},"Cartão de Débito",-1),o("option",{value:"pix"},"PIX",-1)]),512),[[S,e.modelValue.metodo]]),e.modelValue.metodo==="credito"||e.modelValue.metodo==="debito"?s((u(),d("input",{key:0,"onUpdate:modelValue":a[1]||(a[1]=l=>e.modelValue.nomeCartao=l),placeholder:"Nome do Cartão"},null,512)),[[v,e.modelValue.nomeCartao]]):C("",!0),e.modelValue.metodo==="credito"||e.modelValue.metodo==="debito"?s((u(),d("input",{key:1,"onUpdate:modelValue":a[2]||(a[2]=l=>e.modelValue.numeroCartao=l),placeholder:"Número do Cartão"},null,512)),[[v,e.modelValue.numeroCartao]]):C("",!0),e.modelValue.metodo==="credito"||e.modelValue.metodo==="debito"?s((u(),d("input",{key:2,"onUpdate:modelValue":a[3]||(a[3]=l=>e.modelValue.validade=l),placeholder:"Validade (MM/AA)"},null,512)),[[v,e.modelValue.validade]]):C("",!0),e.modelValue.metodo==="credito"||e.modelValue.metodo==="debito"?s((u(),d("input",{key:3,"onUpdate:modelValue":a[4]||(a[4]=l=>e.modelValue.cvv=l),placeholder:"CVV"},null,512)),[[v,e.modelValue.cvv]]):C("",!0)]))}},W=N(K,[["__scopeId","data-v-e53dbcb8"]]),Z={class:"form-section"},_={class:"resumo-content"},ee={class:"resumo-item"},oe={key:1,class:"empty-info"},ae={class:"resumo-item"},te={key:1,class:"empty-info"},le={class:"resumo-item total-section"},ne={class:"total-value"},de=["disabled"],ue={key:0},re={key:1},ie={key:0,class:"loading-overlay"},me={__name:"ResumoPedido",props:{endereco:{type:Object,required:!0},pagamento:{type:Object,required:!0},total:{type:Number,required:!0},loading:{type:Boolean,default:!1}},emits:["confirmar"],setup(e,{emit:f}){const a=f;function l(){a("confirmar")}return(y,i)=>(u(),d("div",Z,[i[4]||(i[4]=o("h2",null,"Resumo do Pedido",-1)),o("div",_,[o("div",ee,[i[0]||(i[0]=o("h3",null,"Endereço de Entrega:",-1)),e.endereco.rua?(u(),d(x,{key:0},[o("p",null,r(e.endereco.nome),1),o("p",null,r(e.endereco.rua)+", "+r(e.endereco.numero)+" "+r(e.endereco.complemento?"- "+e.endereco.complemento:""),1),o("p",null,r(e.endereco.bairro)+", "+r(e.endereco.cidade)+" - "+r(e.endereco.estado),1),o("p",null,"CEP: "+r(e.endereco.cep),1)],64)):(u(),d("p",oe,"Nenhum endereço informado"))]),o("div",ae,[i[1]||(i[1]=o("h3",null,"Método de Pagamento:",-1)),e.pagamento.metodo?(u(),d(x,{key:0},[o("p",null,r(e.pagamento.metodo),1),e.pagamento.metodo==="cartao"?(u(),d(x,{key:0},[o("p",null,"Cartão: **** **** **** "+r(e.pagamento.numeroCartao.slice(-4)),1),o("p",null,"Validade: "+r(e.pagamento.validade),1),o("p",null,"Titular: "+r(e.pagamento.nomeCartao),1)],64)):C("",!0)],64)):(u(),d("p",te,"Nenhum método selecionado"))]),o("div",le,[i[2]||(i[2]=o("h3",null,"Total do Pedido:",-1)),o("p",ne,"R$ "+r(e.total.toFixed(2)),1)])]),o("button",{onClick:l,disabled:e.loading,class:B({"loading-button":e.loading})},[e.loading?(u(),d("span",re,"Processando...")):(u(),d("span",ue,"Confirmar Compra"))],10,de),e.loading?(u(),d("div",ie,i[3]||(i[3]=[o("div",{class:"loading-spinner"},null,-1)]))):C("",!0)]))}},se=N(me,[["__scopeId","data-v-00f680d0"]]),ce={class:"header"},ve={class:"nav"},fe={key:0,class:"cart-count"},Ve={class:"checkout-container"},ge={key:0},Ce={__name:"checkout",setup(e){const f=Y(),a=D(),l=E(!1),{$toast:y}=j(),i=U(()=>f.items.reduce((t,n)=>t+n.quantity,0)),V=E({nome:"",rua:"",cidade:"",cep:"",estado:"",bairro:"",complemento:""}),m=E({metodo:"",nomeCartao:"",numeroCartao:"",validade:"",cvv:""}),p=E({}),g=E({}),F=U(()=>f.items.reduce((t,n)=>t+n.price*n.quantity,0));function R(t){return/^\d{5}-?\d{3}$/.test(t)}function h(t){const n=t.replace(/\s+/g,"");return/^\d{13,16}$/.test(n)}function w(t){return/^\d{3,4}$/.test(t)}function z(t){if(!/^\d{2}\/\d{2}$/.test(t))return!1;const[n,k]=t.split("/"),c=new Date,$=c.getFullYear()%100,I=c.getMonth()+1;return k>$||k==$&&n>=I}function A(){let t=!0;return p.value={},g.value={},V.value.nome||(p.value.nome="Nome é obrigatório",t=!1),V.value.rua||(p.value.rua="Rua é obrigatória",t=!1),V.value.cidade||(p.value.cidade="Cidade é obrigatória",t=!1),V.value.cep?R(V.value.cep)||(p.value.cep="CEP inválido (formato: 00000-000 ou 00000000)",t=!1):(p.value.cep="CEP é obrigatório",t=!1),V.value.estado||(p.value.estado="Estado é obrigatório",t=!1),m.value.metodo||(g.value.metodo="Método de pagamento é obrigatório",t=!1),m.value.metodo==="cartao"&&(m.value.nomeCartao||(g.value.nomeCartao="Nome no cartão é obrigatório",t=!1),m.value.numeroCartao?h(m.value.numeroCartao)||(g.value.numeroCartao="Número do cartão inválido",t=!1):(g.value.numeroCartao="Número do cartão é obrigatório",t=!1),m.value.validade?z(m.value.validade)||(g.value.validade="Validade inválida (formato: MM/AA) ou cartão expirado",t=!1):(g.value.validade="Validade é obrigatória",t=!1),m.value.cvv?w(m.value.cvv)||(g.value.cvv="CVV inválido (3 ou 4 dígitos)",t=!1):(g.value.cvv="CVV é obrigatório",t=!1)),t}async function q(){if(f.items.length===0){y.error("Seu carrinho está vazio. Adicione itens antes de finalizar a compra.");return}if(!A()){y.error("Por favor, corrija os erros no formulário.");return}l.value=!0;try{await new Promise(t=>setTimeout(t,1500)),y.success("Compra finalizada com sucesso!"),f.clearCart(),a.push("/success")}catch(t){y.error("Ocorreu um erro ao processar sua compra. Tente novamente."),console.error(t)}finally{l.value=!1}}return(t,n)=>{const k=T;return u(),d(x,null,[o("header",ce,[n[3]||(n[3]=o("label",null,[o("a",{href:"/"},"Meu E-commerce")],-1)),o("nav",ve,[b(k,{to:"/"},{default:M(()=>n[2]||(n[2]=[O("Home")])),_:1,__:[2]}),b(k,{to:"/cart",class:"nav-link"},{default:M(()=>[b(P(H),{class:"icon"}),i.value>0?(u(),d("span",fe,r(i.value),1)):C("",!0)]),_:1})])]),o("div",Ve,[n[5]||(n[5]=o("h1",null,"Finalizar Compra",-1)),b(G,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=c=>V.value=c)},null,8,["modelValue"]),b(W,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=c=>m.value=c)},null,8,["modelValue"]),b(se,{endereco:V.value,pagamento:m.value,total:F.value,onConfirmar:q},null,8,["endereco","pagamento","total"]),o("ul",null,[n[4]||(n[4]=o("h3",null,"Itens no Carrinho:",-1)),P(f).items.length===0?(u(),d("li",ge,"Seu carrinho está vazio.")):C("",!0),(u(!0),d(x,null,L(P(f).items,c=>(u(),d("li",{key:c.id},r(c.title)+" | Qtd: "+r(c.quantity)+" | R$ "+r(c.price.toFixed(2)),1))),128))])]),n[6]||(n[6]=o("footer",{class:"footer"},[o("p",null,"© 2025 - Meu E-commerce")],-1))],64)}}},Ee=N(Ce,[["__scopeId","data-v-305bd1e4"]]);export{Ee as default};
