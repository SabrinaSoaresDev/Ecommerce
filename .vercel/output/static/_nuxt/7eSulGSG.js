import{_ as E}from"./kStq10vT.js";import{_ as y,u as M,e as C,j as F,o as n,w as k,c as i,g as S,a as t,h as x,F as $,r as V,t as _,d as w,i as P,v as O,T as A,k as h,l as B,m as N,n as R,f as H,b}from"./Cnq9NFPr.js";import{u as I}from"./WEZ96hH_.js";import{u as U}from"./BhFvLIgg.js";import{r as j}from"./AhQuR5BC.js";const q={key:0,class:"cart-sidebar"},Q={class:"cart-header"},z={key:0},D={key:1},L=["src"],G={class:"details"},J=["onUpdate:modelValue","onChange"],K=["onClick"],W={class:"total"},X={__name:"CartSidebar",props:{visible:Boolean},setup(l){const r=I(),a=M();function m(){a.push("/cart")}function v(s){r.removeItem(s)}function c(s,e){e<1&&(e=1),r.updateQuantity(s,e)}const d=C(()=>r.items.reduce((s,e)=>s+e.price*e.quantity,0));return(s,e)=>(n(),F(A,{name:"slide"},{default:k(()=>[l.visible?(n(),i("div",q,[t("div",Q,[e[1]||(e[1]=t("h3",null,"Seu Carrinho",-1)),t("button",{onClick:e[0]||(e[0]=u=>s.$emit("close"))},"✖")]),x(r).items.length===0?(n(),i("div",z,e[2]||(e[2]=[t("p",null,"O carrinho está vazio.",-1)]))):(n(),i("div",D,[(n(!0),i($,null,V(x(r).items,u=>(n(),i("div",{key:u.id,class:"item"},[t("img",{src:u.image,alt:"Produto"},null,8,L),t("div",G,[t("p",null,_(u.title),1),t("p",null,"R$ "+_(u.price.toFixed(2)),1),t("p",null,[e[3]||(e[3]=w(" Quantidade: ")),P(t("input",{type:"number",min:"1","onUpdate:modelValue":f=>u.quantity=f,onChange:f=>c(u.id,u.quantity)},null,40,J),[[O,u.quantity,void 0,{number:!0}]])]),t("button",{class:"remove-btn",onClick:f=>v(u.id)},"Remover",8,K)])]))),128)),t("p",W,"Total: R$ "+_(d.value.toFixed(2)),1)])),t("button",{class:"finish-btn",onClick:m},"Finalizar")])):S("",!0)]),_:1}))}},Y=y(X,[["__scopeId","data-v-127938af"]]);function Z(){const l=h([]);async function r(){try{const a=await fetch("https://fakestoreapi.com/products");l.value=await a.json()}catch(a){console.error("Erro ao buscar produtos:",a)}}return{products:l,fetchProducts:r}}const tt={class:"card"},et=["src"],ot={class:"product-title"},st={class:"product-price"},rt={__name:"ProductCard",props:{product:Object},setup(l){return(r,a)=>(n(),i("div",tt,[t("img",{src:l.product.image,alt:"Imagem do produto",class:"product-image"},null,8,et),t("h3",ot,_(l.product.title),1),t("p",st,"R$ "+_(l.product.price.toFixed(2)),1),t("button",{class:"add-to-cart",onClick:a[0]||(a[0]=m=>r.$emit("add-to-cart",l.product))}," Adicionar ao carrinho ")]))}},at=y(rt,[["__scopeId","data-v-11c0c71e"]]),nt={class:"filter"},lt=["value"],ut={__name:"Filter",props:{categories:Array,modelValue:String},emits:["update:modelValue"],setup(l,{emit:r}){const a=l,m=r,v=h(a.modelValue);return B(v,c=>{m("update:modelValue",c)}),(c,d)=>(n(),i("div",nt,[d[2]||(d[2]=t("label",{for:"category"},"Filtrar por categoria:",-1)),P(t("select",{id:"category","onUpdate:modelValue":d[0]||(d[0]=s=>v.value=s),class:"select"},[d[1]||(d[1]=t("option",{value:""},"Todas",-1)),(n(!0),i($,null,V(l.categories,s=>(n(),i("option",{key:s,value:s},_(s),9,lt))),128))],512),[[N,v.value]])]))}},it=y(ut,[["__scopeId","data-v-2c67d68f"]]),dt={class:"header"},ct={class:"nav"},pt={key:0,class:"cart-count"},mt={class:"content"},vt={class:"grid"},_t={__name:"index",setup(l){const r=h(!1),a=I(),{products:m,fetchProducts:v}=Z(),c=h(""),d=R(),s=C(()=>a.items.reduce((p,o)=>p+o.quantity,0));U({title:"Meu E-commerce"});function e(p){a.addToCart(p),r.value=!0;try{d.success(`${p.title} | Adicionado ao carrinho!`,{position:"top-left",timeout:3e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:!1})}catch{d.error("Erro ao adicionar o produto!",{position:"top-left",timeout:2e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:!1})}}const u=C(()=>[...new Set(m.value.map(p=>p.category))]),f=C(()=>c.value?m.value.filter(p=>p.category===c.value):m.value);return H(()=>{v(),a.loadCart()}),(p,o)=>{const T=E;return n(),i($,null,[t("header",null,[t("div",dt,[o[3]||(o[3]=t("label",null,[t("a",{href:"/"},"Meu E-commerce")],-1)),t("nav",ct,[b(T,{to:"/"},{default:k(()=>o[2]||(o[2]=[w("Home")])),_:1,__:[2]}),b(T,{to:"/cart",class:"nav-link"},{default:k(()=>[b(x(j),{class:"icon"}),s.value>0?(n(),i("span",pt,_(s.value),1)):S("",!0)]),_:1})])])]),t("main",mt,[b(it,{categories:u.value,modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=g=>c.value=g)},null,8,["categories","modelValue"]),o[4]||(o[4]=t("h1",{class:"title"},"Produtos",-1)),o[5]||(o[5]=t("hr",{class:"divider"},null,-1)),t("div",vt,[(n(!0),i($,null,V(f.value,g=>(n(),F(at,{key:g.id,product:g,onAddToCart:e},null,8,["product"]))),128))]),b(Y,{visible:r.value,onClose:o[1]||(o[1]=g=>r.value=!1)},null,8,["visible"])]),o[6]||(o[6]=t("footer",{class:"footer"},[t("p",null,"© 2025 - Meu E-commerce")],-1))],64)}}},ht=y(_t,[["__scopeId","data-v-b21612b0"]]);export{ht as default};
